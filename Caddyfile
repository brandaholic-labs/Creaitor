# Creaitor - Caddy Reverse Proxy Configuration
# Domain: creaitor.hu
# Automatic HTTPS via Let's Encrypt (zero config)
# Reverse proxy to Next.js app on localhost:3000

creaitor.hu, www.creaitor.hu {
    # Automatic HTTPS (Let's Encrypt) - zero config!

    # Reverse proxy to Next.js app
    reverse_proxy localhost:3000

    # Security headers
    header {
        # HSTS - Force HTTPS for 1 year, include subdomains
        Strict-Transport-Security "max-age=31536000; includeSubDomains; preload"

        # Prevent MIME type sniffing
        X-Content-Type-Options "nosniff"

        # Prevent clickjacking attacks
        X-Frame-Options "SAMEORIGIN"

        # Referrer policy for privacy
        Referrer-Policy "strict-origin-when-cross-origin"
    }

    # Access logs in JSON format
    log {
        output file /var/log/caddy/access.log {
            roll_size 50mb
            roll_keep 10
            roll_keep_for 720h
        }
        format json
    }

    # Gzip compression for performance
    encode gzip

    # Health check endpoint (optional)
    # Next.js /api/health will be proxied automatically
}
